(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{11:function(e,t,n){e.exports={button:"Button_button__2cZ5P"}},16:function(e,t,n){},17:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(4),r=n.n(o),s=(n(16),n(9)),u=n(3),i=(n(17),n(5));n(18);var l=function(e,t){return fetch("".concat("https://pixabay.com/api","/?q=").concat(e,"&page=").concat(t,"&key=").concat("22966044-c718c1bbe050e09f7279dea2f","&image_type=photo&orientation=horizontal&per_page=").concat(12)).then((function(t){return t.ok?t.json():Promise.reject(new Error("\u041d\u0435\u0442 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c ".concat(e)))})).then((function(e){return e.hits}))},j=n(1);function b(e){var t=e.onSubmit,n=Object(c.useState)(""),a=Object(u.a)(n,2),o=a[0],r=a[1];return Object(j.jsx)("header",{className:"Searchbar",children:Object(j.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),""!==o.trim()?t(o):i.b.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f")},children:[Object(j.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(j.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(j.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",name:"query",value:o,onChange:function(e){r(e.currentTarget.value.toLowerCase())}})]})})}var m=function(e){var t=e.tags,n=e.webformatURL,c=e.largeImageURL,a=e.setModalImg;return Object(j.jsx)("li",{className:"ImageGalleryItem",children:Object(j.jsx)("img",{src:n,alt:t,className:"ImageGalleryItem-image",onClick:function(){return a({largeImageURL:c,tags:t})}})})},d=n(10),f=n.n(d),g=(n(40),function(){return Object(j.jsx)(f.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3})});function O(e){var t=e.images,n=e.status,c=e.setModalImg;return"idle"===n?Object(j.jsx)(j.Fragment,{}):"pending"===n?Object(j.jsx)(g,{}):"rejected"===n?i.b.error("\u0423\u043f\u0441! \u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"):"resolved"===n?Object(j.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=e.webformatURL,n=e.largeImageURL,a=e.tags,o=e.id;return Object(j.jsx)(m,{tags:a,webformatURL:t,largeImageURL:n,setModalImg:c},o)}))}):void 0}var h=n(11),p=n.n(h),x=function(e){var t=e.onLoadMore;return Object(j.jsx)("button",{type:"button",onClick:t,className:p.a.button,children:"Load more"})},v=document.querySelector("#modal-root");function S(e){return Object(c.useEffect)((function(){function t(t){"Escape"===t.code&&e.onClose()}return window.addEventListener("keydown",t),function(){return window.removeEventListener("keydown",t)}}),[e]),Object(o.createPortal)(Object(j.jsx)("div",{className:"Overlay",onClick:function(t){t.currentTarget===t.target&&e.onClose()},children:Object(j.jsx)("div",{className:"Modal",children:e.children})}),v)}function w(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(""),r=Object(u.a)(o,2),m=r[0],d=r[1],f=Object(c.useState)(1),g=Object(u.a)(f,2),h=g[0],p=g[1],v=Object(c.useState)(null),w=Object(u.a)(v,2),y=w[0],I=w[1],L=Object(c.useState)(null),k=Object(u.a)(L,1)[0],N=Object(c.useState)(null),F=Object(u.a)(N,2),R=F[0],U=F[1],C=Object(c.useState)(null),E=Object(u.a)(C,2),M=E[0],_=E[1],P=Object(c.useState)(!1),q=Object(u.a)(P,2),B=q[0],G=q[1],T=Object(c.useState)("idle"),J=Object(u.a)(T,2),z=J[0],D=J[1];function H(){l(m,h).then((function(e){a((function(t){return[].concat(Object(s.a)(t),Object(s.a)(e))})),p((function(e){return e+1})),h>1&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}),D("resolved")})).catch((function(e){return D("rejected")}),_(M)).finally((function(){return D("resolved")}))}function Z(){G((function(e){return!e}))}return Object(c.useEffect)((function(){m&&(D("pending"),a([]),p(1),H())}),[m]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(b,{onSubmit:function(e){d(e),a([]),p(1)}}),Object(j.jsx)(O,{images:n,tags:y,webformatURL:k,largeImageUR:R,status:z,setModalImg:function(e){var t=e.largeImageURL,n=e.tags;U(t),I(n),Z()}}),n.length>0&&Object(j.jsx)(x,{onLoadMore:H}),B&&Object(j.jsx)(S,{onClose:Z,children:Object(j.jsx)("img",{src:R,alt:y})}),Object(j.jsx)(i.a,{})]})}r.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(w,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.fd39dc39.chunk.js.map