{"version":3,"sources":["components/button/Button.module.css","components/Searchbar.jsx","components/ImageGalleryItem.jsx","components/Load.jsx","components/ImageGallery.jsx","components/button/Button.jsx","components/Modal.jsx","App.js","index.js"],"names":["module","exports","Searchbar","state","query","handleNameChange","e","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","this","className","type","autoComplete","autoFocus","placeholder","name","onChange","Component","ImageGalleryItem","tags","webformatURL","largeImageURL","setModalImg","src","alt","onClick","Load","color","height","width","timeout","ImageGallery","images","status","map","id","Button","onLoadMore","styles","button","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleOverlayClick","target","window","addEventListener","removeEventListener","createPortal","children","App","page","showModal","fetchImages","fetch","then","response","ok","json","Promise","reject","array","prevState","hits","handleScroll","catch","finally","toggleModal","scrollTo","top","documentElement","scrollHeight","behavior","prevProps","console","log","largeImageUR","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3d564566.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2cZ5P\"};","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { toast } from 'react-toastify';\n\nclass Searchbar extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  };\n\n  state = {\n    query: '',\n  };\n\n  handleNameChange = e => {\n    this.setState({ query: e.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    const { query } = this.state;\n\n    if (query.trim() === '') {\n      toast.error('Введите название изображения');\n      return;\n    }\n\n    this.props.onSubmit(query);\n    // this.setState({ query: '' });\n  };\n\n  render() {\n    const { query } = this.state;\n\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            name=\"query\"\n            value={query}\n            onChange={this.handleNameChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import React from 'react';\nimport propTypes from 'prop-types';\n\nconst ImageGalleryItem = ({\n  tags,\n  webformatURL,\n  largeImageURL,\n  setModalImg,\n}) => {\n  return (\n    <li className=\"ImageGalleryItem\">\n      <img\n        src={webformatURL}\n        alt={tags}\n        className=\"ImageGalleryItem-image\"\n        onClick={() => setModalImg({ largeImageURL, tags })}\n      />\n    </li>\n  );\n};\n\nImageGalleryItem.propTypes = {\n  setModalImg: propTypes.func.isRequired,\n  tags: propTypes.string.isRequired,\n  webformatURL: propTypes.string.isRequired,\n  largeImageURL: propTypes.string.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import React from 'react';\n\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nconst Load = () => {\n  return (\n    <Loader\n      type=\"Puff\"\n      color=\"#00BFFF\"\n      height={100}\n      width={100}\n      timeout={3000} //3 secs\n    />\n  );\n};\n\nexport default Load;\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { toast } from 'react-toastify';\n\nimport ImageGalleryItem from './ImageGalleryItem';\nimport Load from './Load';\n\nclass ImageGallery extends Component {\n  static propTypes = {\n    images: PropTypes.array.isRequired,\n    status: PropTypes.string.isRequired,\n    setModalImg: PropTypes.func.isRequired,\n  };\n\n  render() {\n    const { images, status, setModalImg } = this.props;\n\n    if (status === 'idle') {\n      return <></>;\n    }\n\n    if (status === 'pending') {\n      return <Load />;\n    }\n\n    if (status === 'rejected') {\n      return toast.error('Упс! Что-то пошло не так');\n    }\n\n    if (status === 'resolved') {\n      return (\n        <ul className=\"ImageGallery\">\n          {images.map(({ webformatURL, largeImageURL, tags, id }) => (\n            <ImageGalleryItem\n              key={id}\n              tags={tags}\n              webformatURL={webformatURL}\n              largeImageURL={largeImageURL}\n              setModalImg={setModalImg}\n            />\n          ))}\n        </ul>\n      );\n    }\n  }\n}\n\nexport default ImageGallery;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from '../button/Button.module.css';\n\nconst Button = ({ onLoadMore }) => {\n  return (\n    <button type=\"button\" onClick={onLoadMore} className={styles.button}>\n      Load more\n    </button>\n  );\n};\n\nButton.propTypes = {\n  onLoadMore: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  static propTypes = {\n    onClose: PropTypes.func.isRequired,\n    children: PropTypes.node,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleOverlayClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleOverlayClick}>\n        <div className=\"Modal\">{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","import { Component } from 'react';\nimport './App.css';\n\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Button from './components/button/Button';\nimport Modal from './components/Modal';\n\nclass App extends Component {\n  state = {\n    images: [],\n    query: '',\n    page: 1,\n    tags: null,\n    webformatURL: null,\n    largeImageURL: null,\n    error: null,\n    showModal: false,\n    status: 'idle',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    console.log(prevState);\n    const prevName = prevState.query;\n    const nextName = this.state.query;\n\n    if (prevName !== nextName) {\n      this.setState({ status: 'pending', images: [], page: 1 });\n\n      this.fetchImages();\n    }\n  }\n\n  fetchImages = () => {\n    const { query, page } = this.state;\n    const API_KEY = '22966044-c718c1bbe050e09f7279dea2f';\n\n    fetch(\n      `https://pixabay.com/api/?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n    )\n      .then(response => {\n        if (response.ok) {\n          // console.log(images.length);\n\n          // if (images.length === 0) {\n          //   return toast.error(`Нет изображения с названием ${query}`);\n          // }\n\n          return response.json();\n        }\n        return Promise.reject(this.setState({ status: 'rejected' }));\n      })\n      .then(array => {\n        this.setState(prevState => ({\n          images: [...prevState.images, ...array.hits],\n          page: prevState.page + 1,\n          status: 'resolved',\n        }));\n\n        if (page > 1) {\n          this.handleScroll();\n        }\n      })\n      .catch(error => this.setState({ error, status: 'rejected' }))\n      .finally(() => this.setState({ status: 'resolved' }));\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n  };\n\n  setModalImg = ({ largeImageURL, tags }) => {\n    this.setState({ largeImageURL, tags });\n    this.toggleModal();\n  };\n\n  handleScroll = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  onSubmit = query => {\n    this.setState({ query: query, page: 1 });\n  };\n\n  render() {\n    const { images, status, showModal, tags, webformatURL, largeImageURL } =\n      this.state;\n\n    return (\n      <>\n        <Searchbar onSubmit={this.onSubmit} />\n        <ImageGallery\n          images={images}\n          tags={tags}\n          webformatURL={webformatURL}\n          largeImageUR={largeImageURL}\n          status={status}\n          setModalImg={this.setModalImg}\n        />\n        {images.length > 0 && <Button onLoadMore={this.fetchImages} />}\n        {showModal && (\n          <Modal onClose={this.toggleModal}>\n            <img src={largeImageURL} alt={tags} />\n          </Modal>\n        )}\n        <ToastContainer />\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}